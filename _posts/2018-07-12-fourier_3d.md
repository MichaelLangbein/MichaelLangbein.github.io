---
layout: post
title:  "Fourier Transform on Three-Dimensional Objects"
date:   2018-02-25 20:09:02 +0100
categories: fourier
---

This post is still in draft stage! I'll finish it up as soon as I find some time to write again.

$$ \newcommand{\Reals}[]{\mathbb{R}} $$
$$ \newcommand{\Complexes}[]{\mathbb{C}} $$
$$ \newcommand{\Naturals}[]{\mathbb{N}} $$

# Motivation

Like many people I first got into working with the Fourier transform when learning to work with music. It was neat how you could take a signal, find out what notes it consisted of and then adjust the signal to your liking by doing simple operations in the Fourier domain. For example you could add an octave on top of the most important note by just adding another frequency to the signal.

Really, a musical signal is only just a function of time, or, in more technical terms, a mapping $\Reals \to \Reals $. However, there is no reason why we should limit ourselves to only such functions. What about mappings of the form $ A^n \to B $, or $ A^n \to B^m $? It turns out that there is a way to decompose these functions into frequencies as well!

This opens up a whole new world of interesting transformations. For example, grayscale pictures can be viewed as a function mapping x- and y-coordinates onto a pixel-value between 0 and 255. Geometrical objects are commonly described as a mapping of some parameters to a vector $[x, y, z]$. 

What I initially found fascinating about the Fourier transform was how you could modify musical signals. Now that we have learned that you can just as well apply the Fourier transformation to geometrical objects, let's find out what it means to modify them in the Fourier domain! Is there such a thing as "adding an octave to a spere"? If so, what would the spere look like?


# A little bit of theory

Let's first back up a little bit. What does it actually mean to get the Fourier representation of a signal? Feel free to skip to the next section if you want to go to out implementation immediately.

### Decomposing signals

Consider an inner product space $S$ with orthogonal base $B_S$. Any $\vec{s} \in S$ can be represented as a combination of the basevectors $\vec{b}_n \in B_S$, such that

$$\vec{s} = \sum \alpha_n \vec{b}_n $$

Since $B_S$ is orthogonal, the coefficients $\alpha_n$ are easy to obtain:

$$ \alpha_n = < \vec{s}, \vec{b_n} > $$

All this holds for any orthogonal base. Then how is a Fourier base special? Really, there isn't all that much special about the Fourier base, except that the coefficients $\alpha_n$ have a neat interpretation: they are the amplitudes of a wave with frequency $f_n$.

The Fourier Transform is a transform on $B$ that changes the base of $B$ to a set of functions that can be viewed as sine waves. If the signal we want to represent does indeed have some wave-like properties, this representation may be a lot more concise. Choosing to represent a signal by it's Fourier coefficients is a bit like choosing to describe a piece of music by it's notesheet instead of, say, a wav file. The information content remains the same, but from the notesheet we can extract some information way more easily from a notesheet than from the raw values of the wav file. Most people will be able to get at least a vague impression of a song from it's notes, but very few will be able to read *anything* out of the long list of speaker-positions that make out a wav file.


### Different Fourier bases for different spaces

So when we do a Fourier transformation, all we do is find out the values of the amplitudes $\alpha_n$. Now it is important to understand that for different kinds of vectors there are different kinds of Fourier bases. Usually one first gets introduced to the space of periodic signals $\\{ \vec{s}_x \| ... \\}$. In this space, the Fourier base vectors have the form:

$$ ... $$

And the frequency associated with the amplitude $\alpha_n$ is

$$ f_n = ... $$

Here is a plot of some of these base functions.

...

The next interesting case is the space of signals $\\{ \vec{s}_{x, y} \| ... \\}$. In the example of the grayscale-image from earlier, we mapped coordinates $x, y$ to a grayscale-value. Here, we can use the base vectors

$$ ... $$

The frequency associated with ....
Finally, lets revisit the example of the ellipsoid-function from the introduction. Contrary to the case of the grayscale image, where we mapped coordinates to a value, now we'll map parameters to coordinates. Consequently, our base will consist of functions mapping .... . Fortunately for us, however, this seemingly complicated case can easily be reduced to the much simpler case from before. Note that a vector-valued function can be decomposed as such: 

$$ f = \vec{x} f_x + \vec{y} f_y + \vec{z} f_z $$ 

Applying this to out ellipsoid function, we obtain: 

$$ ... $$

This may be confusing in a way: both in the case of the grayscale image and in the case of the ellipsoid our Fourier amplitudes have only two dimensions! How is this possible when an image is clearly two-dimensional, whereas an ellipsoid has three dimensions? Well, what determines the dimensionality of the Fourier amplitudes is the *domain* of the function, not its range. In the case of the image, the x- and y-coordinates are important for the dimensionality of the amplitudes, not the grayscale-value. In the case of the ellipsoid, the parameters $\theta$ and $\phi$ matter for the dimensionality of the amplitudes, not the coordinates that the ellipsoid-function yields. It just so happend that the ellipsoid can be parameterized with two parameters, but there are other geometric objects that require less, or more, parameters. These functions, however, would make out part of different vector spaces and as such have their own Fourier bases.  


# Working with the Fourier transform of geometrical objects

Now that we have some understanding of what we're doing, it's time to get out hands dirty. We'll transform an ellipsoid into the frequency domain, play around with the frequencies a bit, and transform it back to see what effect our meddling has had.

First, however, we'll need a function to describe the ellipsoid. For convenience, we'll use a spherical coordinate system. Within such a system, we can write the radius of the ellipsoid as a function of the two parameters $\theta$ (the polar angle) and $\phi$ (the azimuth angle):

$$ r = 1 / \sqrt{ \frac{\cos^2( \frac{\pi}{2} - \theta) \cos^2(\phi)}{r_x^2} + \frac{\cos^2( \frac{\pi}{2} -\theta) \sin^2(\phi)}{r_y^2} + \frac{\cos^2(\theta)}{r_z^2} } $$

Let's implement this:



```python
```



Intro:
	fft: 
		t = [0 + deltat]
		x = signal(t)
		plot(t, x)
		a = fft(x)
		a' = addOctave(a)
		x' = ifft(a')
		plot(t, x')

in 3d
	how?
		t = [0 + deltaap], where deltaap = (deltaPhi, deltaRho)  (ap=angular position)
		sig = signal(t)
		a = fft(sig) = ( fft(sig_x), fft(sig_y), fft(sig_z) )
	why?
		simplest approach
		there is a vector space where scalars and vectors are the same thing
		that is geometric algebra
		there is also a fft for nvector-samples defined
		if the nvector-sample consists of scalar-only-nvectors, it reduces to fft
		it the nvector-sample consists of vector-only-nvectors, it reduces to [fft_x, fft_y, fft_z]

Example
	Code
	Plot

A note on sampling
	fft requires samples to be taken at regular intervals. 
	deltat is regular wrt time. consequently, the frequencies of fft are frequencies wrt time. 
	how is our deltaap regular? 
		it is regular with respect to angular position. consequently, the frequences of fft are also frequences wrt angular position. 
		if in 1d we did an octave as twice the frequency wrt time, 
		what would be twice the frequency wrt angular position?

A second note on sampling
	for fft to notice a wave with frequency f, that wave must have passed through at least twice. 
	thus, in our sphere, we need to have moved around the sphere at least twice. 


